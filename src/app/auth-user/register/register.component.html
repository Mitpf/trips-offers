<main class="register-cont">

    <!-- <div [ngClass]="{ 'validation-message': inpvalidErrors.length }">
        <ng-container *ngFor="let error of inpvalidErrors">
            <div>{{error.message}}</div>
        </ng-container>
    </div> -->




    <form class="register-form" [formGroup]="form" (ngSubmit)="register()">
        <h4>Create new account:</h4>

        <label for="userName">Username:
            <input [ngClass]="{ 'inp-error': hasErr('username') }" type="text" placeholder=" - minimum 3 letters" class="inpfield"
                formControlName="username">
        </label>

        <div class="validation-message">
            <ng-container *ngFor="let error of inpvalidErrors">
                <p *ngIf="error.name=='username'">{{error.message}}</p>
            </ng-container>
        </div>

        <label for="e-mail">E-mail:
            <input [ngClass]="{ 'inp-error': hasErr('email') }" type="email" placeholder="valid email@xxx.vv " class="inpfield"
                formControlName="email">
        </label>

        <div class="validation-message">
            <ng-container *ngFor="let error of inpvalidErrors">
                <p *ngIf="error.name=='email'">{{error.message}}</p>
            </ng-container>
        </div>

        <ng-container formGroupName="pswGroup">

            <label for="password">Password:
                <input [ngClass]="{ 'inp-error': hasErr('password')||(hasErr('pswGroup')&&isDirtFGcontrol('pswGroup','password')&&isDirtFGcontrol('pswGroup','repass')) }" type="password"
                    placeholder="password-min. 6 symbols" class="inpfield" formControlName="password">
            </label>

            <div class="validation-message">
                <ng-container *ngFor="let error of inpvalidErrors">
                    <p *ngIf="error.name=='password'">{{error.message}}</p>
                </ng-container>
            </div>

            <label for="repassword">Repassword:
                <input [ngClass]="{ 'inp-error': hasErr('repass')||(hasErr('pswGroup')&&isDirtFGcontrol('pswGroup','password')&&isDirtFGcontrol('pswGroup','repass')) }" type="password"
                    placeholder="repeat password" class="inpfield" formControlName="repass">
            </label>

            <div class="validation-message">
                <ng-container *ngFor="let error of inpvalidErrors">
                    <p *ngIf="error.name=='repass'">{{error.message}}</p>
                </ng-container>
            </div>

        </ng-container>

        <!-- validation message match passwords -->
        <div class="validation-message">
            <ng-container *ngFor="let error of inpvalidErrors">
                <p  *ngIf="error.name=='pswGroup' && isDirtFGcontrol('pswGroup','password')&&isDirtFGcontrol('pswGroup','repass')"> {{error.message}}</p>
            </ng-container>
        </div>



        <button [ngClass]="form.invalid ? 'a-button-disabled':'a-button'">Register now</button>

        <p>Already have an account? <a class="a-txt" routerLink="/login">Login</a> </p>
    </form>

    <!--  <span [ngClass]="{'uncheck': isNeverTouchedEmail() || hasErr('email'), 'check': !isNeverTouchedEmail() && !hasErr('email')}">âœ“</span> -->
</main>